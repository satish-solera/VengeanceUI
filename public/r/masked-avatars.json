{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "masked-avatars",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "components/ui/masked-avatars.tsx",
      "content": "\"use client\"\r\nimport React, { useState } from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { motion } from \"framer-motion\"\r\n\r\ninterface Avatar {\r\n    avatar: string\r\n    name: string\r\n}\r\n\r\nexport interface MaskedAvatarsProps {\r\n    avatars?: Avatar[]\r\n    size?: number // avatar size (responsive base)\r\n    border?: number\r\n    column?: number\r\n    movement?: number // hover lift sensitivity\r\n    transition?: number // animation duration\r\n    ltr?: boolean\r\n    ringed?: boolean\r\n    offset?: number // text ring rotation offset\r\n    blurOnRest?: boolean // NEW: only blur when not hovered\r\n    className?: string\r\n}\r\n\r\nconst defaultAvatars: Avatar[] = [\r\n    { avatar: \"https://i.pravatar.cc/150?u=a\", name: \"Garou\" },\r\n    { avatar: \"https://i.pravatar.cc/150?u=b\", name: \"Johan\" },\r\n    { avatar: \"https://i.pravatar.cc/150?u=c\", name: \"Light Yagami\" },\r\n    { avatar: \"https://i.pravatar.cc/150?u=d\", name: \"Vegeta\" },\r\n    { avatar: \"https://i.pravatar.cc/150?u=e\", name: \"Light Yagami\" },\r\n]\r\n\r\nexport function MaskedAvatars({\r\n    avatars = defaultAvatars,\r\n    size = 70,\r\n    border = 8,\r\n    column = 40,\r\n    movement = 0.72,\r\n    transition = 0.18,\r\n    ringed = true,\r\n    offset = -3,\r\n    blurOnRest = true,\r\n    className\r\n}: MaskedAvatarsProps) {\r\n    const [hoveredIndex, setHoveredIndex] = useState<number | null>(null)\r\n\r\n    // Optimize derived values with useMemo\r\n    const { dynamicSize, maskImage } = React.useMemo(() => {\r\n        const dynamicSize = `clamp(${size - 20}px, ${size}px, ${size + 30}px)`\r\n        const circle = (border * 2 + size) / 2\r\n        const radX = circle - column - border\r\n        const maskImage = `radial-gradient(${circle}px ${circle}px at ${radX}px 50%, transparent ${circle - 0.5}px, white ${circle}px)`\r\n        return { dynamicSize, maskImage }\r\n    }, [size, border, column])\r\n\r\n    const transitionConfig = React.useMemo(() => ({\r\n        type: \"spring\" as const,\r\n        stiffness: 260,\r\n        damping: 20,\r\n    }), [])\r\n\r\n    return (\r\n        <div\r\n            className={cn(\"relative flex items-center\", className)}\r\n            style={{\r\n                gap: `min(6vw, ${size * 0.5}px)`,\r\n                \"--size\": dynamicSize,\r\n            } as React.CSSProperties}\r\n            role=\"group\"\r\n            aria-label=\"Animated avatar group\"\r\n        >\r\n            <div className=\"relative flex items-center\">\r\n                <ul\r\n                    className=\"m-0 p-0 list-none grid grid-flow-col content-end\"\r\n                    style={{\r\n                        height: column,\r\n                        gridAutoColumns: column,\r\n                        transform: `translateX(${(size - column) * 0.5}px)`,\r\n                    }}\r\n                    role=\"list\"\r\n                >\r\n                    {avatars.map((person, index) => {\r\n                        const isHovered = hoveredIndex === index\r\n                        const isPrevHovered = hoveredIndex === index - 1\r\n\r\n                        const baseOffset = -size * 1.5\r\n                        const moveOffset = size * movement\r\n\r\n                        const maskPosition = isPrevHovered\r\n                            ? `0 ${baseOffset - moveOffset}px`\r\n                            : isHovered\r\n                                ? `0 ${baseOffset + moveOffset}px`\r\n                                : `0 ${baseOffset}px`\r\n\r\n                        return (\r\n                            <motion.li\r\n                                key={index}\r\n                                className=\"relative grid content-end outline-none pointer-events-none will-change-transform\"\r\n                                role=\"listitem\"\r\n                                style={{\r\n                                    width: dynamicSize,\r\n                                    aspectRatio: \"1/3\",\r\n                                    transform: `translate(\r\n                    ${(size - column) * -0.5}px,\r\n                    ${(size - column) * 0.5}px\r\n                  )`,\r\n                                    zIndex: avatars.length - index,\r\n                                }}\r\n                                tabIndex={0}\r\n                                aria-label={`Avatar of ${person.name}`}\r\n                                onMouseEnter={() => setHoveredIndex(index)}\r\n                                onMouseLeave={() => setHoveredIndex(null)}\r\n                                onFocus={() => setHoveredIndex(index)}\r\n                                onBlur={() => setHoveredIndex(null)}\r\n                                onTouchStart={() => setHoveredIndex(index)}\r\n                            >\r\n                                {ringed && (\r\n                                    <div\r\n                                        className=\"name absolute left-1/2 text-center uppercase font-mono font-normal pointer-events-none\"\r\n                                        aria-hidden=\"true\"\r\n                                        style={{\r\n                                            width: size,\r\n                                            height: size,\r\n                                            borderRadius: \"50%\",\r\n                                            bottom: 0,\r\n                                            transform: `translate(-50%, ${isHovered ? -movement * 100 : 0\r\n                                                }%)`,\r\n                                            transition: `transform ${transition}s ease-out`,\r\n                                        }}\r\n                                    >\r\n                                        {person.name.split(\"\").map((char, i) => (\r\n                                            <span\r\n                                                key={i}\r\n                                                className=\"absolute will-change-transform\"\r\n                                                style={{\r\n                                                    offsetPath: \"border-box\",\r\n                                                    offsetDistance: `${(offset + i) * 0.75}ch`,\r\n                                                    offsetAnchor: \"50% 130%\",\r\n                                                    transform: isHovered\r\n                                                        ? \"translate(0, 0)\"\r\n                                                        : \"translate(0, 100%)\",\r\n                                                    filter: isHovered\r\n                                                        ? \"blur(0px)\"\r\n                                                        : blurOnRest\r\n                                                            ? \"blur(4px)\"\r\n                                                            : \"blur(0px)\",\r\n                                                    opacity: isHovered ? 1 : 0,\r\n                                                    transition: `transform ${transition}s ease-out, opacity ${transition}s ease-out, filter ${transition}s ease-out`,\r\n                                                }}\r\n                                            >\r\n                                                {char}\r\n                                            </span>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"avatar-holder absolute inset-0 grid content-end\">\r\n                                    <motion.span\r\n                                        className={cn(\r\n                                            \"avatar inline-block w-full aspect-square rounded-full relative overflow-hidden pointer-events-auto border-[3px] border-background will-change-transform\",\r\n                                            \"focus:ring-2 focus:ring-offset-2 focus:ring-foreground\"\r\n                                        )}\r\n                                        role=\"img\"\r\n                                        aria-label={person.name}\r\n                                        style={{\r\n                                            maskImage: index === 0 ? \"none\" : maskImage,\r\n                                            WebkitMaskImage: index === 0 ? \"none\" : maskImage,\r\n                                            maskSize: \"100% 400%\",\r\n                                            WebkitMaskSize: \"100% 400%\",\r\n                                            maskRepeat: \"no-repeat\",\r\n                                        }}\r\n                                        animate={{\r\n                                            maskPosition: index === 0 ? \"0 0\" : maskPosition,\r\n                                            y: isHovered ? -movement * 100 + \"%\" : \"0%\",\r\n                                            scale: isHovered ? 1.05 : 1,\r\n                                            opacity:\r\n                                                hoveredIndex !== null && hoveredIndex !== index\r\n                                                    ? 0.7\r\n                                                    : 1,\r\n                                        }}\r\n                                        transition={transitionConfig}\r\n                                    >\r\n                                        <img\r\n                                            src={person.avatar}\r\n                                            alt={person.name}\r\n                                            className=\"absolute inset-0 w-full h-full object-cover bg-muted\"\r\n                                        />\r\n                                    </motion.span>\r\n                                </div>\r\n\r\n                                {/* Hover/Tap Hit Area */}\r\n                                <div className=\"absolute bottom-0 w-full aspect-square pointer-events-auto\" />\r\n                            </motion.li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n",
      "type": "registry:ui",
      "target": "components/ui/masked-avatars.tsx"
    }
  ]
}