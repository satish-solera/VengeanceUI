{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "animated-number",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "components/ui/animated-number.tsx",
      "content": "\"use client\"\r\n\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction AnimatedNumber({ value, className }: { value: number, className?: string }) {\r\n    return (\r\n        <div className={cn(\"flex items-center\", className)}>\r\n            <div className=\"flex relative items-center\">\r\n                {value.toString().split(\"\").map((digit, index) => (\r\n                    <SingleNumberHolder key={index} value={digit} index={index} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction SingleNumberHolder({ value, index }: { value: string, index: number }) {\r\n    const [height, setHeight] = useState<string | null>(null)\r\n    const containerRef = useRef<HTMLDivElement>(null)\r\n    let notANumber = false\r\n\r\n    useEffect(() => {\r\n        if (containerRef.current) {\r\n            setHeight(getComputedStyle(containerRef.current).height)\r\n        }\r\n    }, [])\r\n\r\n    if (index === 0) {\r\n        notANumber = isNaN(Number.parseInt(value))\r\n    }\r\n\r\n    const vars = {\r\n        init: { opacity: 0 },\r\n        animate: { opacity: 1 },\r\n        exit: { opacity: 0 },\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"relative\"\r\n            style={{ height: height || \"auto\", overflowY: \"hidden\", overflowX: \"clip\" }}\r\n            ref={containerRef}\r\n        >\r\n            {notANumber && (\r\n                <motion.span\r\n                    initial=\"init\"\r\n                    animate=\"animate\"\r\n                    exit=\"exit\"\r\n                    variants={vars}\r\n                    key={value}\r\n                    layout=\"size\"\r\n                >\r\n                    {value}\r\n                </motion.span>\r\n            )}\r\n            {!notANumber && <RenderStrip value={value} eleHeight={height} />}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst zeroToNine = Array.from({ length: 10 }, (_, k) => k)\r\n\r\nfunction RenderStrip({ eleHeight, value }: { eleHeight: string | null, value: string }) {\r\n    const heightInNumber = Number.parseInt(eleHeight?.replace(\"px\", \"\") || \"48\")\r\n    const negative = heightInNumber * -1\r\n    const pos = heightInNumber\r\n    const prev = useRef(value)\r\n\r\n    // Convert string values to numbers for comparison\r\n    const currentVal = parseInt(value)\r\n    const prevVal = parseInt(prev.current)\r\n\r\n    // Calculate direction based on value change\r\n    const diff = prevVal - currentVal\r\n    const dir = currentVal > prevVal ? pos * diff * -1 : negative * diff\r\n\r\n    // Update ref after calculation\r\n    useEffect(() => {\r\n        prev.current = value\r\n    }, [value])\r\n\r\n    return (\r\n        <AnimatePresence mode='wait'>\r\n            <motion.div\r\n                key={value}\r\n                initial={{ y: dir }}\r\n                animate={{ y: 0 }}\r\n                exit={{ y: 0, transition: { duration: 0.1 } }}\r\n                transition={{ duration: 0.5, ease: \"easeOut\" }}\r\n                className='flex relative flex-col'\r\n            >\r\n                {/* Numbers smaller than current */}\r\n                <motion.span\r\n                    layout\r\n                    key={`negative-${value}`}\r\n                    className={cn('flex flex-col items-center absolute bottom-full left-0')}\r\n                >\r\n                    {zeroToNine.filter(val => val < currentVal).map((val, idx) => (\r\n                        <span key={`${val}_${idx}`}>{val}</span>\r\n                    ))}\r\n                </motion.span>\r\n\r\n                {/* Current Number */}\r\n                <span key={`current-${value}`}>{value}</span>\r\n\r\n                {/* Numbers larger than current */}\r\n                <motion.span\r\n                    layout\r\n                    key={`positive-${value}`}\r\n                    className={cn('flex flex-col items-center absolute top-full left-0')}\r\n                >\r\n                    {zeroToNine.filter(val => val > currentVal).map((val, idx) => (\r\n                        <span key={`${val}_${idx}`}>{val}</span>\r\n                    ))}\r\n                </motion.span>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}\r\n\r\n// Score-style animated number with color feedback\r\nfunction AnimatedScore({ value, duration = 0.2, className }: { value: number, duration?: number, className?: string }) {\r\n    const prevValueRef = useRef(value)\r\n\r\n    useEffect(() => {\r\n        prevValueRef.current = value\r\n    }, [value])\r\n\r\n    const colors = {\r\n        negative: \"#37ff1a\",\r\n        positive: \"#ff1a4b\",\r\n        neutral: \"#fff\"\r\n    }\r\n\r\n    const transforVal = 80\r\n    const forwards = {\r\n        init: { y: transforVal * -1, opacity: 0, scale: 0.5, color: colors.negative },\r\n        animate: {\r\n            y: 0,\r\n            opacity: 1,\r\n            scale: [1.7, 1],\r\n            color: [colors.negative, colors.negative, colors.neutral],\r\n            transition: { duration: 0.4, times: [0, 0.7, 1], color: { times: [0, 0.75, 0.9] } },\r\n        },\r\n        exit: {\r\n            y: transforVal,\r\n            opacity: 0,\r\n            scale: 0.5,\r\n            color: colors.positive\r\n        },\r\n    }\r\n\r\n    const backwards = {\r\n        init: { y: transforVal, opacity: 0, scale: 0.5, color: colors.positive },\r\n        animate: {\r\n            y: 0,\r\n            opacity: 1,\r\n            scale: [1.7, 1],\r\n            color: [colors.positive, colors.positive, colors.neutral],\r\n            transition: { duration: 0.4, times: [0, 0.7, 1], color: { times: [0, 0.75, 0.9] } },\r\n        },\r\n        exit: {\r\n            y: transforVal * -1,\r\n            opacity: 0,\r\n            scale: 0.5,\r\n            color: colors.negative\r\n        }\r\n    }\r\n\r\n    const variants = value >= prevValueRef.current ? forwards : backwards\r\n    const direction = value >= prevValueRef.current ? \"forwards\" : \"backwards\"\r\n\r\n    return (\r\n        <div className={cn(\"relative flex justify-center items-center py-1 px-2 w-full rounded-md\", className)}>\r\n            <motion.div layout=\"size\" className='w-fit flex justify-center items-center'>\r\n                {value.toString().split(\"\").map((number, index) => (\r\n                    <ScoreContainer\r\n                        direction={direction}\r\n                        duration={duration}\r\n                        variants={variants}\r\n                        number={number}\r\n                        key={index}\r\n                    />\r\n                ))}\r\n            </motion.div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ScoreContainer({ number, variants, duration = 0.7, direction }: {\r\n    number: string,\r\n    variants: any,\r\n    duration?: number,\r\n    direction: string\r\n}) {\r\n    const cached = React.useMemo(() => (\r\n        <div className='relative'>\r\n            <AnimatePresence mode='popLayout'>\r\n                <motion.div\r\n                    animate=\"animate\"\r\n                    className='flex justify-center items-center'\r\n                    initial=\"init\"\r\n                    exit=\"exit\"\r\n                    variants={variants}\r\n                    key={number.toString()}\r\n                    layout=\"size\"\r\n                    transition={{ duration, ease: \"backInOut\" }}\r\n                >\r\n                    {number}\r\n                </motion.div>\r\n            </AnimatePresence>\r\n        </div>\r\n    ), [number, direction, variants, duration])\r\n\r\n    return <React.Fragment>{cached}</React.Fragment>\r\n}\r\n\r\nexport { AnimatedNumber, AnimatedScore }\r\n",
      "type": "registry:ui",
      "target": "components/ui/animated-number.tsx"
    }
  ]
}